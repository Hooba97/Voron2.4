[include mainsail.cfg]
[include moonraker_obico_macros.cfg]
[include neo.cfg]
[include macros.cfg]
[include motors.cfg]

[exclude_object]

[mcu]
serial: /dev/serial/by-id/usb-Klipper_stm32h723xx_24000E000951313339373836-if00
[mcu CB2]
serial: /tmp/klipper_host_mcu

#####################################################################
# 	EBB
#####################################################################

[mcu EBB]
serial: /dev/serial/by-id/usb-Klipper_rp2040_504434031095121C-if00

[temperature_sensor EBB_NTC]
sensor_type: Generic 3950
sensor_pin: EBB:gpio27

[lis2dw]
cs_pin: EBB:gpio1
spi_bus: spi0a
axes_map: z,x,y

[resonance_tester]
probe_points: 100, 100, 20
accel_chip: lis2dw

#####################################################################
# 	EDDY
#####################################################################

[mcu eddy]
serial: /dev/serial/by-id/usb-Klipper_rp2040_50443403102B461C-if00
restart_method: command
#Did you read all of the comments before the macros? Make sure that you do and then uncomment the ones that you need. Remove this line when you are done.

[temperature_sensor btt_eddy_mcu]
sensor_type: temperature_mcu # Sets the type of sensor for Klipper to read
sensor_mcu: eddy # Sets the MCU of the eddy probe tempereature sensor
min_temp: 10 # Sets the minimum tempereature for eddys tempereature sensor to operate
max_temp: 100 # Sets the maximum tempereature for eddys tempereature sensor to operate

[probe_eddy_current btt_eddy]
sensor_type: ldc1612
z_offset: 2.5
#i2c_address:
i2c_mcu: eddy
i2c_bus: i2c0f
x_offset: 0
y_offset: 21.42

[temperature_probe btt_eddy]
sensor_type: Generic 3950
sensor_pin: eddy:gpio26
horizontal_move_z: 2

[bed_mesh]
horizontal_move_z: 2
speed: 150
mesh_min: 25, 31.42 
mesh_max: 325, 325
#mesh_max: 287.5, 290
probe_count: 9, 9
algorithm: bicubic
scan_overshoot: 8  #uncomment this section if you still have room left over on the X axis for some scan overshoot to product smoother movements and more accurate scanning. Uncommenting this should be fine if you are using a standard voron mount.

[safe_z_home]
home_xy_position: 170, 170 
z_hop: 10
z_hop_speed: 25
speed: 200

[save_variables]
filename: ~/printer_data/config/variables.cfg

[force_move]
enable_force_move: True



#####################################################################
# 	MAIN
#####################################################################

[printer]
kinematics: corexy
max_velocity: 500  
max_accel: 4000 
max_z_velocity: 15 			#Max 15 for 12V TMC Drivers, can increase for 24V


#max_velocity: 500  
#max_accel: 25000    			#Max 4000
#max_z_velocity: 30 			#Max 15 for 12V TMC Drivers, can increase for 24V
max_z_accel: 350
square_corner_velocity: 5.0

[temperature_sensor MCU]
sensor_type: temperature_mcu

[temperature_sensor SoC]
sensor_type: temperature_host




#####################################################################
# 	Bed Heater
#####################################################################

[heater_bed]
heater_pin: PA0
sensor_type: ATC Semitec 104GT-2
#sensor_type: EPCOS 100K B57560G104F
#Generic 3950
sensor_pin: PB1
max_power: 1.0
min_temp: 0
max_temp: 120
#control: pid
#pid_kp: 58.437
#pid_ki: 2.347
#pid_kd: 363.769


#####################################################################
# 	Homing and Gantry Adjustment Routines
#####################################################################

[idle_timeout]
timeout: 1800

[quad_gantry_level]
##	Use QUAD_GANTRY_LEVEL to level a gantry.
##	Min & Max gantry corners - measure from nozzle at MIN (0,0) and 
##	MAX (250, 250), (300,300), or (350,350) depending on your printer size
##	to respective belt positions

gantry_corners:
	-60,-10
	410,420
#	Probe points
points:
	50,25
	50,275
	300,275
	300,25
    
#gantry_corners:
#	-80,-55
#	390,375
#points:
#	57.5,10
#	57.5,200
#	247.5,200
#	247.5,10
speed: 150
horizontal_move_z: 10
retries: 5
retry_tolerance: 0.0075
max_adjust: 10

[board_pins]
aliases:
    # EXP1 header
    EXP1_1=PE7, EXP1_2=PG1,
    EXP1_3=PG0, EXP1_4=PF15,
    EXP1_5=PF14, EXP1_6=PF13,    # Slot in the socket on this side
    EXP1_7=PF12, EXP1_8=PF11,
    EXP1_9=<GND>, EXP1_10=<5V>,

    # EXP2 header
    EXP2_1=PE13, EXP2_2=PE12,
    EXP2_3=PE15, EXP2_4=PE11,
    EXP2_5=PE10, EXP2_6=PE14,      # Slot in the socket on this side
    EXP2_7=PE8, EXP2_8=<RST>,
    EXP2_9=<GND>, EXP2_10=<NC>

[fan] # fan1
pin: EBB:gpio14



[heater_fan hotend_fan] # fan2
pin: EBB:gpio4
heater: extruder
heater_temp: 50.0


[controller_fan motor_driver_fan]
pin: PF7
kick_start_time: 0.5
#cycle_time: 0.1  # Optional for better low-speed performance
stepper: stepper_x, stepper_y, stepper_z, extruder  # List all motors to monitor
idle_timeout: 10  # Time in seconds to keep the fan running after motors are idle
max_power: 0.75

#*# <---------------------- SAVE_CONFIG ---------------------->
#*# DO NOT EDIT THIS BLOCK OR BELOW. The contents are auto-generated.
#*#
#*# [probe_eddy_current btt_eddy]
#*# reg_drive_current = 15
#*# calibrate =
#*# 	0.050000:3169009.455,0.090000:3168493.445,0.130000:3167987.836,
#*# 	0.170000:3167434.142,0.210000:3166937.712,0.250000:3166432.098,
#*# 	0.290000:3165960.910,0.330000:3165437.398,0.370000:3165000.038,
#*# 	0.410000:3164521.875,0.450000:3164084.097,0.490000:3163614.141,
#*# 	0.530000:3163180.511,0.570000:3162749.276,0.610000:3162299.828,
#*# 	0.650000:3161914.964,0.690000:3161480.464,0.730000:3161072.400,
#*# 	0.770000:3160671.787,0.810000:3160304.151,0.850000:3159908.151,
#*# 	0.890000:3159537.615,0.930000:3159163.483,0.970000:3158804.977,
#*# 	1.010000:3158428.014,1.050000:3158075.487,1.090000:3157742.441,
#*# 	1.130000:3157375.656,1.170000:3157036.210,1.210000:3156720.792,
#*# 	1.250000:3156406.842,1.290000:3156071.808,1.330000:3155769.728,
#*# 	1.370000:3155460.960,1.410000:3155171.679,1.450000:3154862.208,
#*# 	1.490000:3154575.922,1.530000:3154287.333,1.570000:3154000.565,
#*# 	1.610000:3153734.352,1.650000:3153458.113,1.690000:3153188.892,
#*# 	1.730000:3152918.433,1.770000:3152671.457,1.810000:3152405.916,
#*# 	1.850000:3152160.552,1.890000:3151892.123,1.930000:3151673.865,
#*# 	1.970000:3151433.967,2.010000:3151193.419,2.050000:3150944.000,
#*# 	2.090000:3150723.385,2.130000:3150474.209,2.170000:3150271.182,
#*# 	2.210000:3150066.928,2.250000:3149882.441,2.290000:3149646.523,
#*# 	2.330000:3149430.918,2.370000:3149227.277,2.410000:3149019.771,
#*# 	2.450000:3148825.523,2.490000:3148645.725,2.530000:3148437.763,
#*# 	2.570000:3148248.641,2.610000:3148071.218,2.650000:3147877.287,
#*# 	2.690000:3147681.292,2.730000:3147531.079,2.770000:3147342.686,
#*# 	2.810000:3147157.737,2.850000:3146989.569,2.890000:3146840.008,
#*# 	2.930000:3146671.239,2.970000:3146515.434,3.010000:3146334.701,
#*# 	3.050000:3146183.599,3.090000:3146023.811,3.130000:3145868.338,
#*# 	3.170000:3145725.841,3.210000:3145568.157,3.250000:3145424.688,
#*# 	3.290000:3145298.722,3.330000:3145155.972,3.370000:3145022.190,
#*# 	3.410000:3144853.817,3.450000:3144736.335,3.490000:3144581.771,
#*# 	3.530000:3144470.211,3.570000:3144342.461,3.610000:3144213.497,
#*# 	3.650000:3144093.676,3.690000:3143961.359,3.730000:3143834.598,
#*# 	3.770000:3143717.894,3.810000:3143601.861,3.850000:3143473.825,
#*# 	3.890000:3143382.109,3.930000:3143251.222,3.970000:3143133.171,
#*# 	4.010000:3143016.121,4.050000:3142865.067
#*#
#*# [extruder]
#*# control = pid
#*# pid_kp = 16.396
#*# pid_ki = 0.834
#*# pid_kd = 80.544
#*#
#*# [input_shaper]
#*# shaper_type_x = 2hump_ei
#*# shaper_freq_x = 71.8
#*# shaper_type_y = mzv
#*# shaper_freq_y = 35.4
#*#
#*# [bed_mesh default]
#*# version = 1
#*# points =
#*# 	  0.136549, 0.099778, 0.066555, 0.047957, 0.055583, 0.050723, 0.066578, 0.083121, 0.105403
#*# 	  0.136656, 0.090606, 0.059017, 0.041374, 0.033295, 0.035821, 0.047729, 0.058747, 0.073405
#*# 	  0.110643, 0.084558, 0.048145, 0.016306, 0.014954, 0.014525, 0.026064, 0.035578, 0.046120
#*# 	  0.108656, 0.063170, 0.033113, 0.014489, 0.003735, -0.004856, 0.004995, 0.015778, 0.025935
#*# 	  0.095081, 0.059738, 0.038419, 0.016030, 0.002426, 0.004139, 0.005592, 0.020462, 0.025973
#*# 	  0.106425, 0.066704, 0.044491, 0.031945, 0.016243, 0.020580, 0.027817, 0.025417, 0.037692
#*# 	  0.112491, 0.078542, 0.044685, 0.040505, 0.036152, 0.031206, 0.047225, 0.048679, 0.053074
#*# 	  0.132765, 0.095417, 0.070324, 0.062560, 0.061088, 0.066025, 0.071908, 0.077846, 0.082479
#*# 	  0.132874, 0.096895, 0.095104, 0.087548, 0.092522, 0.117552, 0.137596, 0.141420, 0.156777
#*# x_count = 9
#*# y_count = 9
#*# mesh_x_pps = 2
#*# mesh_y_pps = 2
#*# algo = bicubic
#*# tension = 0.2
#*# min_x = 25.0
#*# max_x = 325.0
#*# min_y = 31.42
#*# max_y = 324.94
#*#
#*# [heater_bed]
#*# control = pid
#*# pid_kp = 62.776
#*# pid_ki = 3.948
#*# pid_kd = 249.536
